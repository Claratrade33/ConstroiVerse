<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>ConstroiVerse â€” Representante Comercial</title>
  <link rel="stylesheet" href="/static/style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="painel-representante">

  <header>
    <h1>ğŸ’¼ ConstroiVerse â€” Representante Comercial</h1>
    <p>PortfÃ³lio inteligente e conexÃ£o com o mercado</p>
  </header>

  <main>

    <!-- PRODUTOS OFERTADOS -->
    <section class="bloco bloco-produtos">
      <h2>ğŸ›’ Meus Produtos Ativos</h2>
      <ul>
        <li>Tijolo ecolÃ³gico â€” R$2,80/un â€” 12 vendas</li>
        <li>Massa corrida Premium â€” R$89,90 â€” 7 vendas</li>
      </ul>
    </section>

    <!-- COMISSÃ•ES -->
    <section class="bloco bloco-comissoes">
      <h2>ğŸ’° Minhas ComissÃµes</h2>
      <ul>
        <li>Vendas no mÃªs: R$ 8.490</li>
        <li>ComissÃ£o atual: R$ 1.273,50</li>
      </ul>
    </section>

    <!-- CURRÃCULO INTELIGENTE -->
    <section class="bloco bloco-portifolio">
      <h2>ğŸ“„ Montar CurrÃ­culo Inteligente</h2>

      <p>Escolha os produtos/segmentos que deseja incluir:</p>
      <label><input type="checkbox" class="produto" value="Tintas Suvinil"> Tintas â€” Suvinil</label><br>
      <label><input type="checkbox" class="produto" value="Pisos Portobello"> Pisos â€” Portobello</label><br>
      <label><input type="checkbox" class="produto" value="LouÃ§as Celite"> LouÃ§as â€” Celite</label><br>
      <label><input type="checkbox" class="produto" value="Metais Deca"> Metais â€” Deca</label><br>

      <textarea id="descricao_portfolio" placeholder="ObservaÃ§Ãµes (opcional)..."></textarea>

      <button onclick="gerarApresentacao()">âœ¨ Gerar ApresentaÃ§Ã£o com IA</button>
      <pre id="apresentacao_gerada">...</pre>

      <div class="bloco-envio">
        <button onclick="enviarParaFabricante()">ğŸ“¤ Enviar para Fabricante</button>
        <button onclick="enviarParaLoja()">ğŸ“© Enviar para Loja</button>
      </div>
    </section>

    <!-- FERRAMENTAS -->
    <section class="bloco bloco-ferramentas">
      <h2>ğŸ§° Ferramentas do Representante</h2>
      <ul>
        <li>ğŸ“± App de vendas com catÃ¡logo inteligente</li>
        <li>ğŸ“¦ Acesso ao estoque e margens em tempo real</li>
        <li>ğŸ“Š Painel de comissÃµes e histÃ³rico</li>
        <li>ğŸ§  GeraÃ§Ã£o de currÃ­culo com IA Clarice</li>
      </ul>
    </section>

  </main>

  <footer>
    <p>ConstroiVerse Â© 2025 â€” Representante Integrado</p>
  </footer>

  <script src="/static/dashboard.js"></script>
  <script>
    async function gerarApresentacao() {
      const produtosSelecionados = Array.from(document.querySelectorAll('.produto:checked')).map(p => p.value);
      const descricaoExtra = document.getElementById('descricao_portfolio').value;

      if (produtosSelecionados.length === 0) {
        alert('Selecione pelo menos 1 produto.');
        return;
      }

      document.getElementById('apresentacao_gerada').innerText = 'â³ Gerando apresentaÃ§Ã£o com IA...';

      const response = await fetch('/ia/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          descricao: `Sou um representante comercial. Quero uma apresentaÃ§Ã£o para os produtos: ${produtosSelecionados.join(', ')}. ObservaÃ§Ãµes: ${descricaoExtra}`
        })
      });

      const data = await response.json();
      document.getElementById('apresentacao_gerada').innerText = typeof data === 'object' ? JSON.stringify(data, null, 2) : data;
    }

    function enviarParaFabricante() {
      const curriculo = document.getElementById('apresentacao_gerada').innerText;
      if (!curriculo || curriculo.includes('â³')) {
        alert('Gere a apresentaÃ§Ã£o antes de enviar!');
        return;
      }
      alert('âœ… ApresentaÃ§Ã£o enviada ao fabricante!');
      // Aqui entraria um POST para /fabricante/receber_apresentacao
    }

    function enviarParaLoja() {
      const curriculo = document.getElementById('apresentacao_gerada').innerText;
      if (!curriculo || curriculo.includes('â³')) {
        alert('Gere a apresentaÃ§Ã£o antes de enviar!');
        return;
      }
      alert('âœ… ApresentaÃ§Ã£o enviada para loja!');
      // Aqui entraria um POST para /loja/receber_apresentacao
    }
  </script>
</body>
</html>